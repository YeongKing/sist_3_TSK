package day0206;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;

import javax.swing.JOptionPane;

/**
 * 
 * 		//C:/dev/temp/java_read.txt를 읽어와서<br>
 *		//C:/dev/temp/java_write4.txt 파일을 생성한 후 <br>
 *		//C:/dev/temp/java_read.txt 읽어들여 java_write4.txt 쓰는 <br>
 *		//코드를 작성해보세요.<br>
 *		//단, C:/dev/temp/java_write4.txt 파일이 존재하지 않으면 파일을 생성하고,<br>
 *		//존재 한다면 덮어쓸것 인지 물어본 후 파일에 덮어 쓴다.<br>
 * 
 * 
 * 
 */
public class TestStream {

	public TestStream() throws IOException{
		
		String path = JOptionPane.showInputDialog("읽어올 파일의 경로를 입력해주세요.");
		
		File readFile = new File(path);

		if (!readFile.exists()) {
			JOptionPane.showMessageDialog(null, "파일명이나 경로를 확인해주세요.");
			return;

			
		} // end if
		
		//C:/dev/temp 디렉토리가 없을 시 생성
		File newDir = new File("C:/dev/temp");
		newDir.mkdirs();

		
		//1. 파일 생성
		File newFile = new File("C:/dev/temp/java_write4.txt");
		
		//2. 스트림 생성
		FileWriter fw = null;
		try {
			fw = new FileWriter(newFile);
			String str = "문자열 데이터가 Java에서 생성되었습니다.";
			
			//3. 스트림에 데이터 기록
			fw.write(str);
			
			//4. 스트림의 내용을 목적지로 분출
			fw.flush();
			
		}finally {
			if(fw !=null) {
				fw.close();
			}//end if
		}
		
		
		
		
		
		
		

		
		// 2.File을 읽기 위한 stream을 연결
				FileInputStream fis = null;

				try {
					fis = new FileInputStream(readFile);
					// 3.반복문을 돌려서 값을 얻는다...

					int readData = 0;

					while ((readData = fis.read()) != -1) {// 1byte 읽어들여 값이 존재하면
						System.out.print((char)readData); //값을 출력한다.

					} // end While

				} finally {
					if(fis != null) {
						fis.close();
						
						
					}//end
			

				} // finally

	
	}//TestStream
	
	
	
	
	
	public static void main(String[] args) {

		try {
			new TestStream();
		} catch (IOException e) {
			
			e.printStackTrace();
		}
		
	}//main

}//class
